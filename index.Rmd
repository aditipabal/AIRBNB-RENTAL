---
title: "AirBnB Rental Price Estimation: 80 Rugg Rd, Allston"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns   # Defines a structure with columns
    vertical_layout: fill
    storyboard: false

---
                               

# INFORMATION{.sidebar}         
=======================

### ðŸ  Unit Information

* **Address:** 80 Rugg Rd, Allston, MA 02134
* **Characteristics:** Entire Rental Unit, 2 Bedrooms
* **Method Used:** Inverse Distance Weighting (IDW) within a 1000m radius.

### Suggested Price

> **The final interpolated price is:408.58**


---

### **Source Code & Data**

[View the Project on GitHub](https://github.com/aditipabal/AIRBNB-RENTAL)

# (Map)   
=========================

### Interpolation Map: Suggested Price Surface

```{r setup, include=FALSE}
# ... PASTE YOUR R SETUP CODE HERE (libraries, data loading, st_transform, etc.)
# Note: This is where the setup chunk should go if not placed before the entire dashboard.
# (I recommend placing the setup chunk immediately after the YAML header for clean organization.)



library(flexdashboard)
library(leaflet)
library(sf)
library(tidyverse)



# Load the GeoJSON data exported from Python
price_grid <- st_read("boston_price_grid .geojson")
my_unit <- st_read("my_unit_location .geojson")

# --- CRITICAL FIX: Reproject to WGS84 (EPSG:4326) for Leaflet ---
# This will eliminate the 'sf layer is not long-lat data' warnings
price_grid <- st_transform(price_grid, crs = 4326)
my_unit <- st_transform(my_unit, crs = 4326)
# -----------------------------------------------------------------

# Extract the suggested price and ensure it is numeric (as fixed previously)
suggested_price <- as.numeric(my_unit$radius_1000[1])

# Define a color palette for the price visualization
pal <- colorNumeric("viridis", domain = price_grid$radius_1000)
```

```{r}
# Create the Leaflet map
leaflet(price_grid) %>%
  addProviderTiles(providers$CartoDB.Positron) %>%
  
# Add the Hexagon Grid (Price Surface)
 addPolygons(
    fillColor = ~pal(radius_1000),
    weight = 1,
    opacity = 1,
    color = "white",
    fillOpacity = 0.7,
    highlightOptions = highlightOptions(
      weight = 2,
      color = "#666",
      fillOpacity = 0.9,
      bringToFront = TRUE),
    label = ~paste0("Estimated Price: $", round(radius_1000, 2))
  ) %>%
  
  # Add my unit's location
  addCircleMarkers(
    data = my_unit,
    color = "red",
    fillColor = "red",
    radius = 5,
    stroke = TRUE,
    fillOpacity = 1,
    label = paste("My Unit - Suggested Price: $408.58", round(suggested_price, 2))
  ) %>%
  
  # Add Legend
  addLegend(
    pal = pal, 
    values = ~radius_1000, 
    opacity = 0.7, 
    title = "Estimated Price ($)",
    position = "bottomright"
  ) %>%
  
  # Zoom to area of interest
  setView(
    lng = st_coordinates(my_unit)[1], 
    lat = st_coordinates(my_unit)[2], 
    zoom = 12
  )

```


